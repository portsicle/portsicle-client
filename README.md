## Portscile Client

- Portsicle is a **Free and Open-source Ngrok alternative** to expose local servers online.

- Portsicle client allows you to use the <a href="https://github.com/portsicle/portsicle-server">Portsicle Server</a> via CLI.

## Installation

- Install the [latest release](https://github.com/portsicle/portsicle-client/releases) for your operating system.

- For Linux, you may need to give executeable permission to the binary `chmod +x ./portsicle`.

- For Windows, the `portsicle_win_x64.exe` file is directly executable via CLI.

## Client Usage

- Use the CLI to run the client:

```
./portsicle http -p 3000
```

- for windows:

```
./portsicle_win_x64.exe http -p 3000
```

> note that `3000` is the port of your local server which you want to expose on public network.

- for more help:

```
./portsicle --help
```

## Guide

### React + Vite

1. Build your React application using `vite build` or any other method.

2. Serve the build generated by vite inside `dist` directory using `npm run preview` or write a custom script with appropriate MIME types.

- Custom Script Example (recommended):

```js
import http from "http";
import fs from "fs/promises";
import path from "path";

const port = 3000;
const basePath = "./";
const mimeTypes = {
  ".html": "text/html",
  ".css": "text/css",
  ".js": "application/javascript",
};

const server = http.createServer(async (req, res) => {
  const url = req.url === "/" ? "/index.html" : req.url;
  const filePath = path.join(basePath, url);
  try {
    const content = await fs.readFile(filePath);
    const extname = path.extname(filePath);
    res.writeHead(200, {
      "Content-Type": mimeTypes[extname] || "application/octet-stream",
    });
    res.end(content);
  } catch (error) {
    res.writeHead(404);
    res.end("File not found");
  }
});

server.listen(port, () => {
  console.log(`Server running at http://localhost:${port}/`);
});
```

3. With this minimal setup your build will be served locally, Now run the `portsicle client` and mention the port on which the build is running (`3000` in this case).

```
./portsicle http -p 3000
```

**Similar approach can be applied for Simple Node HTML servers as well as other meta Frameworks (Vue, Svelte, etc)**
