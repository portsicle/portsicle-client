## Portscile Client

- Portsicle is a free and open-source Ngrok alternative to expose local servers online.

- Portsicle client allows you to use the <a href="https://github.com/portsicle/portsicle-server">Portsicle Server</a> via CLI.

## Installation

- Install the provided binary from latest release.

- Give executeable permission to the binary `chmod +x ./portsicle-client`.

- Use the CLI to run the client:

```
./portsicle http -p 3000
```

> note that `3000` is the port of your local server, which you want to expose on public network.

## CLI Usage

```
./portsicle --help

Usage:
  portsicle [command]

Available Commands:
  completion  Generate the autocompletion script for the specified shell
  help        Help about any command
  http        Expose local http port

Flags:
  -h, --help     help for portsicle
  -t, --toggle   Help message for toggle

Use "portsicle [command] --help" for more information about a command.
```

```
./portsicle http --help
Expose local http port

Usage:
  portsicle http [flags]

Flags:
  -h, --help          help for http
  -p, --port string   Port on which your local server is listening. (default "8888")
```

## Guide

### React + Vite

1. Build your React application using `vite build` or any other method.

2. Serve the build generated by vite inside `dist` directory using `npm run preview` or write a custom script with appropriate MIME types.

- Custom Script Example (recommended):

```js
import http from "http";
import fs from "fs/promises";
import path from "path";

const port = 3000;
const basePath = "./";
const mimeTypes = {
  ".html": "text/html",
  ".css": "text/css",
  ".js": "application/javascript",
};

const server = http.createServer(async (req, res) => {
  const url = req.url === "/" ? "/index.html" : req.url;
  const filePath = path.join(basePath, url);
  try {
    const content = await fs.readFile(filePath);
    const extname = path.extname(filePath);
    res.writeHead(200, {
      "Content-Type": mimeTypes[extname] || "application/octet-stream",
    });
    res.end(content);
  } catch (error) {
    res.writeHead(404);
    res.end("File not found");
  }
});

server.listen(port, () => {
  console.log(`Server running at http://localhost:${port}/`);
});
```

3. With this minimal setup ypur build will be served locally, Now run the `portsicle client` and mention the port on which the build is running (`3000` in this case).

```
./portsicle http -p 3000
```

**Smilar approach can be applied for Simple Node HTML servers as well as other meta Frameworks (Vue, Svelte, etc)**
